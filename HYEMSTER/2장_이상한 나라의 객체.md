# 객체 지향과 인지 능력

- 인간은 본능적으로 세상을 독립적이고 식별 가능한 객체의 집합으로 바라본다.
    
    → 객체지향은 세상을 자율적이고 독립적인 객체들로 분해할 수 있는 인간의 기본적인 인지 능력에 기반을 둔다.
    
- 인간이 지각할 수 있는 객체
    - 물리적인 객체 - 자동차, 가로수, 모니터 등등
    - 추상적인 객체 - 오눌의 주문 내역과 어제의 주문 내역, 주문과 계좌 이체 등
    
    → 객체란, 인간이 분명하게 인지하고 구별할 수 있는 물리적, 개념적인 경계를 지닌 어떤 것이다.
    
- 객체지향 패러다임의 목적은 현실 세계를 기반으로 새로운 세계를 창조하는 것이다.
    - 현실 세계를 모방하는 것이 아니다.
    - 소프트웨어 세계의 객체는 현실 세계의 객체와 다른 모습을 보인다.

# 객체, 그리고 이상한 나라

### 👧🏻 앨리스 객체

- 앨리스가 케이크와 버섯을 먹으며 키를 변화시키는 것
    - 정원으로 가는 문을 통과하기 위해 자신의 **상태**를 변화시킨다.
    - 상자 속의 케이크를 먹거나 버섯을 먹는 **행동**으로 인해 상태가 변화한다.
- **행동의 결과는 상태에 의존적이다.**
    - 상태를 결정하는 것은 행동이지만, 행동의 결과를 결정하는 것은 상태이다.
        
        ex) 280cm인 앨리스가 부채질을 하면 280-20cm가 되어 결과적으로 260cm가 된다.
        
- **행동 간에는 순서가 중요하다.**
    - 어떤 행동의 성공 여부는 이전에 어떤 행동들이 발생했는지에 영향을 받는다.
        
        ex) 문을 통과하기 위해서는 음료나 케이크를 먼저 먹어야 한다.
        
- **행동에 의해 상태가 변경되더라도 앨리스가 앨리스라는 사실은 변하지 않는다.** (유일하게 식별 가능)

# 객체, 그리고 소프트웨어 나라

## 객체란?

- 하나의 개별적인 실체로 식별 가능한 개체 또는 사물이다.
- 객체는 상태, 행동, 식별자를 지닌 실체이다.

## 상태

- 어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다.
    - 자판기 음료를 뽑기 위해서는 먼저 충분한 금액을 투입해야한다.
    - 드라이브를 하기 위해서는 먼저 자동차의 시동을 걸어야한다.
- 모든 행동 이력을 기억하는 것은 번거롭고 비효율적이다.
    
    → 상태라는 개념으로 행동의 결과를 표현한다.
    

### 상태와 프로퍼티

- 그 자체로 독립적인 의미를 가지는 게 아니라 객체의 특성을 표현하는 데 사용되는 단순한 값은 상태이다.
    
    ex) 앨리스의 키와 위치, 음료와 케이크의 양, 토끼가 달리는 속도 등
    
- 상태의 일부를 객체로 표현할 수도 있다.
    
    ex) 앨리스가 음료를 들고 있는 상태를 표현함 → 앨리스 객체가 음료 객체와 연결되어 있는지로 판단함
    
- 모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다.
    - **프로퍼티**: 객체의 상태를 구성하는 모든 특징으로, 정적이다.
    - **프로퍼티 값**: 시간의 흐름에 따라 변하기 때문에 동적이다.
- 객체와 객체 사이의 의미 있는 연결을 **링크**라고 한다. ex) 앨리스와 음료
    - 객체와 객체 사이에는 링크가 존재해야만 요청(메시지)를 주고받을 수 있다.
    - 링크는 객체가 다른 객체를 참조할 수 있다는 것을 의미한다. (한 객체가 다른 객체의 식별자를 알고 있다.)
- 객체를 구성하는 단순한 값은 **속성**이라고 한다.

→ 객체의 프로퍼티는 단순한 값인 속성과 다른 객체를 가리키는 링크 두 종류의 조합으로 표현할 수 있다.

## 행동

### 상태와 행동

- 객체의 상태를 변경하는 것은 객체의 자발적인 행동뿐이다.
- 행동은 상태를 변화시킨다. (side effect를 초래한다.)
- 헹동의 결과는 상태에 의존적이다.
    - 행동은 상태에 영향을 받는다.
    - 행동은 상태를 변경시킨다.

### 협력과 행동

- 객체는 자신에게 주어진 책임을 완수하기 위해 다른 객체를 이용하고 다른 객체에게 서비스를 제공한다.
    - 객체는 다른 객체에게 요청을 보낸다.
    - 요청을 수신한 객체는 요청을 처리하기 위해 적절한 방법에 따라 행동하며 자신의 상태를 변화시킨다.

### 상태 캡슐화

- 객체지향 세계에서 모든 객체는 자신의 상태를 스스로 관리하는 자율적인 존재이다.
    - 앨리스가 음료에게 ‘음료를 마셨다’는 메시지를 전달한다.
    - 음료는 스스로 자신의 양을 변경한다.
- 메시지 송신자는 수신자의 상태 변경에 대해서는 전혀 알지 못한다. (**캡슐화**)
    - 객체가 외부에 노출하는 것은 행동뿐이다.
    - 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.
- 상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화하는 것은 객체의 자율성을 높인다.

## 식별자

- 객체를 서로 구별할 수 있는 특정한 프로퍼티를 식별자라고 하며, 모든 객체는 식별자를 가진다.
- 값과 객체의 큰 차이는 객체는 식별자를 가진다는 점이다.
- 값과 객체의 동등성
    - 값의 상태는 변하지 않기 때문에 불변 상태를 가진다.
        
        → **값이 같다면 동등하다.**
        
    - 객체는 시간에 따라 변경되는 상태를 포함하며, 상태는 행동에 따라 달라지므로 가변 상태를 가진다.
        
        → **타입이 같은 객체의 상태가 완전히 똑같더라도, 동등하지 않다. (equality)**
        
        → **두 객체의 상태가 다르더라도 식별자가 같다면, 동일하다. (identical)**
        

# 기계로서의 객체

- 객체의 상태를 조화하는 작업을 **쿼리(query)**, 객체의 상태를 변경하는 작업을 **명령(command)**이라고 한다.
- 기계를 객체에 비유해보자
    - 기계 내부는 단단한 금속으로 둘러싸여 있어 어떻게 돌아가는지 직접 볼 수 없다.
    - 사각형 모양의 버튼을 누르면 객체의 상태를 변경할 수 있다. (command)
    - 둥근 모양의 버튼을 누르면 객체의 상태가 디스플레이 창에 출력된다. (query)
    
    → 사용자는 객체가 제공하는 명령 버튼과 쿼리 버튼으로 구성된 인터페이스를 통해서만 객체에 접근할 수 있다.
    

## 행동이 상태를 결정한다

- 상태를 먼저 결정하고 행동을 나중에 결정하는 것이 안좋은 이유
    - 캡슐화가 저해된다.
    - 객체를 협력자가 아닌 고립된 섬으로 만든다.
    - 객체의 저사용성이 저하된다.
    
    → 객체를 설계할 땐 상태가 아니라 행동에 초점을 맞추어야 한다.
    
    - 애플리케이션에 필요한 협력을 생각한다.
    - 협력에 참여하는데 필요한 행동을 생각한다.
    - 행동을 수행할 객체를 선택한다.
    - 행동을 결정한 후에 행동에 필요한 정보가 무엇인지 고려하며 상태를 결정한다.

## 은유와 객체

### 두 번째 도시전설

- ‘객체지향이란 현실 세계의 모방’이다. ❌
    - 현실 세계 ≠ 소프트웨어 세계

### 의인화

- 현실 속에서는 수동적인 존재가 소프트웨어 객체로 구현될 때는 능동적으로 변한다.
- 소프트웨어 세계에서의 객체는 현실을 모방한 것이 아니다.
    - 현실의 모습을 조금 참조할 뿐, 현실과 전혀 다른 새로운 세계를 창조한다.

### 은유

- 현실 속의 객체의 의미 일부가 소프트웨어 객체로 전달되기 때문에 프로그램 내의 객체는 현실 속의 객체에 대한 은유다.
    - 은유를 통해 현실과의 표현적 차이를 줄여 이해하기 쉽고 유지보수가 용이하게 만든다.

### 이상한 나라를 창조하라

- 우리의 목적은 현실을 모방하는 것이 아니라, 창조하는 것이다.
- 현실 속의 객체 이름을 이용해 객체를 묘사해도 좋다.
- 아니면 현실을 무시하고 자유롭게 새로운 세계를 창조해도 좋다!
